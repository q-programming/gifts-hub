<div ng-if="authenticated">
    <h1>{{listTitle}}</h1>
    <div class="animate row" ng-show="showAddNew">
        <div class="col-md-offset-2 col-md-6">
            <form role="form" name="newGift" ng-submit="create()">
                <div class="form-group" show-errors="">
                    <label for="name" translate="gift.name"></label>
                    <input type="text" class="form-control" id="name" name="name" ng-model="giftForm.name"
                           required="required"/>
                </div>
                <div class="form-group" show-errors="">
                    <label for="description" translate="gift.description"></label>
                    <textarea class="form-control" id="description" name="description" ng-model="giftForm.description">
                </textarea>
                </div>
                <div class="form-group" show-errors="">
                    <label for="link" translate="gift.link"></label>
                    <input type="url" class="form-control" id="link" name="link" ng-model="giftForm.link"/>
                    <span class="validation-error" ng-show="newGift.link.$error.url" translate="gift.link.error">
                </span>
                </div>
                <div class="form-group">
                    <label for="category" translate="gift.category"></label>
                    <ui-select ng-model="giftForm.category" id="category">
                        <ui-select-match placeholder="Select category or add new one...">
                            <span ng-bind="$select.selected.name"></span>
                        </ui-select-match>
                        <ui-select-choices
                                repeat="category in (categories | filter: $select.search) track by category.id"
                                refresh="refreshResults($select)" refresh-delay="0">
                            <span ng-bind="category.name"></span>
                        </ui-select-choices>
                    </ui-select>
                    <!--<tags-input id="category" ng-model="giftForm.category"></tags-input>-->
                    <!--<input type="text" class="form-control" id="category" name="category" ng-model="giftForm.category"/>-->
                </div>
                <label translate="app.manage.search.engine"></label>
                <div class="form-group">
                <span ng-repeat="engine in searchEngines">
                    <label>
                        <input type="checkbox" ng-model="giftForm.searchEngines[engine.id]" name="searchEngines"
                               id="{{engine.id}}"/>
                        <i ng-class="'fa fa-fw '+ engine.icon"></i>{{engine.name}}
                    </label><br/>
                </span>
                    <span class="help-block" translate="gift.search.help"></span>
                </div>
                <div class="pull-right">
                    <a href="" class="btn btn-default" ng-click="reset()" translate="main.cancel"></a>
                    <button type="submit" class="btn btn-primary" translate="main.create"></button>
                </div>
            </form>
        </div>
    </div>
    <div class="animate" ng-show="!showAddNew">
        <div class="row">
            <button type="button" class="btn btn-success pull-right" ng-click="show()"
                    ng-show="!showAddNew &amp;&amp; userList">
                <i class="fa fa-plus" aria-hidden="true"></i>
                <span translate="gift.new.add"></span>
            </button>
        </div>
        <div class="row header hidden-xs">
            <div class="col-sm-3">
                <strong translate="gift.name"></strong>
            </div>
            <div class="col-sm-3 hidden-xs">
                <strong translate="gift.description"></strong>
            </div>
            <div class="col-sm-3 hidden-xs">
                <strong translate="gift.link"></strong>
            </div>
            <div class="col-sm-2 hidden-xs">
                <strong translate="gift.add.date"></strong>
            </div>
        </div>
        <div ng-repeat="(key, value) in giftsList">
            <h4><strong translate="{{key}}">{{key}}</strong></h4>
            <div class="row margin-bottom10" ng-repeat="gift in value">
                <div class="col-xs-12 col-sm-3">
                    <gift-status gift="gift"></gift-status>
                    <!--<span ng-bind-html="getGiftStatus(gift)"></span>-->
                    <strong>{{gift.name}}</strong>
                </div>
                <div class="col-xs-12 col-sm-3">{{gift.description}}</div>
                <div class="col-xs-6 col-sm-3">
                    <a ng-if="gift.link" ng-href="{{gift.link}}">{{ gift.name }}</a>
                    <span ng-repeat="engine in gift.engines">
                <a class="pull-right" ng-href="{{engine.searchString + gift.name}}" target="_blank">
                <i ng-class="'fa fa-fw '+ engine.icon"
                   aria-hidden="true"
                   title="{{searchWith + engine.name}}"></i>
                </a>
            </span>
                </div>
                <div class="col-xs-5 col-md-2">{{ getGiftDate(gift) }}</div>
                <div class="col-xs-1 col-md-1 text-center">
                    <span class="fa-stack clickable" ng-if="canBeClaimed(gift)"
                          uib-tooltip="{{'gift.claim' | translate}}" ng-click="claimGift(gift)">
                        <i class="fa fa-fw fa-lg fa-hand-paper-o" aria-hidden="true">
                        </i>
                    </span>
                    <span class="fa-stack fa-lg clickable" ng-if="canBeUnClaimed(gift)"
                          uib-tooltip="{{'gift.unclaim' | translate}}" ng-click="unClaimGift(gift)">
                        <i class="fa fa-times fa-stack-1x"></i>
                        <i class="fa fa-hand-paper-o fa-stack-1x"></i>
                    </span>
                    </i>
                </div>
            </div>
        </div>
    </div>
</div>

